<!DOCTYPE html>
<html lang="en">
<head>
Â  Â  <meta charset="UTF-8">
Â  Â  <meta name="viewport" content="width=device-width, initial-scale=1.0">
Â  Â  <title>Virtual Chef</title>
Â  Â  <script src="https://cdn.tailwindcss.com"></script>
Â  Â  <style>
Â  Â  Â  Â  @import url('https://fonts.googleapis.com/css2?family=Poppins:wght@400;600&display=swap');
Â  Â  Â  Â  body {
Â  Â  Â  Â  Â  Â  font-family: 'Poppins', sans-serif;
Â  Â  Â  Â  Â  Â  background-image: url('https://images.unsplash.com/photo-1546069901-d7a83d47f999?ixlib=rb-4.0.3&q=80&fm=jpg&crop=entropy&cs=tinysrgb&w=1920&h=1080&fit=crop');
Â  Â  Â  Â  Â  Â  background-size: cover;
Â  Â  Â  Â  Â  Â  background-position: center;
Â  Â  Â  Â  }
Â  Â  Â  Â  .container-shadow {
Â  Â  Â  Â  Â  Â  box-shadow: 0 10px 30px -5px rgba(0, 0, 0, 0.08), 0 4px 12px -2px rgba(0, 0, 0, 0.04);
Â  Â  Â  Â  Â  Â  background-color: rgba(255, 252, 249, 0.8);
Â  Â  Â  Â  }
Â  Â  Â  Â  .loading-spinner {
Â  Â  Â  Â  Â  Â  border: 4px solid #f0e6e6;
Â  Â  Â  Â  Â  Â  border-top: 4px solid #84cc16; /* Sage green spinner */
Â  Â  Â  Â  Â  Â  border-radius: 50%;
Â  Â  Â  Â  Â  Â  width: 40px;
Â  Â  Â  Â  Â  Â  height: 40px;
Â  Â  Â  Â  Â  Â  animation: spin 1s linear infinite;
Â  Â  Â  Â  }
Â  Â  Â  Â  @keyframes spin {
Â  Â  Â  Â  Â  Â  0% { transform: rotate(0deg); }
Â  Â  Â  Â  Â  Â  100% { transform: rotate(360deg); }
Â  Â  Â  Â  }
Â  Â  Â  Â  .fade-in {
Â  Â  Â  Â  Â  Â  animation: fadeIn 0.5s ease-in-out forwards;
Â  Â  Â  Â  Â  Â  opacity: 0;
Â  Â  Â  Â  }
Â  Â  Â  Â  @keyframes fadeIn {
Â  Â  Â  Â  Â  Â  from { opacity: 0; transform: translateY(10px); }
Â  Â  Â  Â  Â  Â  to { opacity: 1; transform: translateY(0); }
Â  Â  Â  Â  }
Â  Â  Â  Â  .shake {
Â  Â  Â  Â  Â  Â  animation: shake 0.5s cubic-bezier(.36,.07,.19,.97) both;
Â  Â  Â  Â  Â  Â  transform: translate3d(0, 0, 0);
Â  Â  Â  Â  Â  Â  backface-visibility: hidden;
Â  Â  Â  Â  Â  Â  perspective: 1000px;
Â  Â  Â  Â  }
Â  Â  Â  Â  @keyframes shake {
Â  Â  Â  Â  Â  Â  10%, 90% { transform: translate3d(-1px, 0, 0); }
Â  Â  Â  Â  Â  Â  20%, 80% { transform: translate3d(2px, 0, 0); }
Â  Â  Â  Â  Â  Â  30%, 50%, 70% { transform: translate3d(-4px, 0, 0); }
Â  Â  Â  Â  Â  Â  40%, 60% { transform: translate3d(4px, 0, 0); }
Â  Â  Â  Â  }
Â  Â  </style>
</head>
<body class="flex items-center justify-center min-h-screen p-4">
Â  Â  <div class="flex flex-col items-center justify-center w-full">
Â  Â  Â  Â  <div class="rounded-2xl p-6 md:p-8 w-full max-w-2xl container-shadow flex flex-col items-center">
Â  Â  Â  Â  Â  Â  <h1 class="text-3xl font-bold text-gray-800 mb-2 text-center">ğŸ‘¨â€ğŸ³ Virtual Chef</h1>
Â  Â  Â  Â  Â  Â  <p class="text-center text-gray-500 mb-6">Enter a dish and your desired servings to get a tailored recipe.</p>

Â  Â  Â  Â  Â  Â  <div class="w-full space-y-4 mb-4">
Â  Â  Â  Â  Â  Â  Â  Â  <div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <label for="dishNameInput" class="block text-sm font-medium text-gray-700 mb-1">Dish Name</label>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <input type="text" id="dishNameInput" placeholder="e.g., Lasagna" class="w-full p-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-lime-500 transition-all duration-200" autocomplete="off">
Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  <div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <label for="servingsInput" class="block text-sm font-medium text-gray-700 mb-1">Number of Servings</label>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <input type="number" id="servingsInput" placeholder="e.g., 4" class="w-full p-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-lime-500 transition-all duration-200">
Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  </div>

Â  Â  Â  Â  Â  Â  <button id="getRecipeBtn" class="w-full bg-[#f97316] text-white font-semibold py-3 px-6 rounded-lg hover:bg-orange-600 transition-all duration-300">Get Recipe</button>

Â  Â  Â  Â  Â  Â  <div id="loadingIndicator" class="hidden my-6">
Â  Â  Â  Â  Â  Â  Â  Â  <div class="loading-spinner"></div>
Â  Â  Â  Â  Â  Â  Â  Â  <p class="mt-2 text-gray-600">Preparing your recipe...</p>
Â  Â  Â  Â  Â  Â  </div>

Â  Â  Â  Â  Â  Â  <div id="resultContainer" class="hidden w-full mt-6 fade-in">
Â  Â  Â  Â  Â  Â  Â  Â  <div class="p-6 bg-[#fdf2e8] rounded-lg border border-[#fbd38d]">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <h2 id="recipeName" class="text-2xl font-bold text-gray-800 mb-2"></h2>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <p id="servings" class="text-gray-600 text-sm mb-4"></p>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <h3 class="text-lg font-semibold text-gray-700 mb-2">Ingredients:</h3>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <ul id="ingredientsList" class="list-disc list-inside space-y-1 text-gray-600 mb-4"></ul>

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <h3 class="text-lg font-semibold text-gray-700 mb-2">Instructions:</h3>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <ol id="processList" class="list-decimal list-inside space-y-2 text-gray-600"></ol>
Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  </div>

Â  Â  Â  Â  Â  Â  <div id="errorContainer" class="hidden w-full mt-6 p-4 bg-red-100 border border-red-400 text-red-700 rounded-lg" role="alert">
Â  Â  Â  Â  Â  Â  Â  Â  <p id="errorMessage" class="font-medium"></p>
Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  <div id="infoContainer" class="hidden w-full mt-6 p-4 bg-lime-100 border border-lime-400 text-lime-700 rounded-lg" role="alert">
Â  Â  Â  Â  Â  Â  Â  Â  <p id="infoMessage" class="font-medium"></p>
Â  Â  Â  Â  Â  Â  </div>

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="w-full bg-yellow-100 border-l-4 border-yellow-500 text-yellow-700 p-4 rounded-lg mt-6">
Â  Â  Â  Â  Â  Â  Â  Â  <p class="font-medium">Disclaimer</p>
Â  Â  Â  Â  Â  Â  Â  Â  <p class="text-sm">These recipes are generated by AI. Use your best judgment when preparing the dishes and consider consulting a professional resource for critical dietary or safety information.</p>
Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  </div>
Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  Â  Â  <footer class="w-full text-center text-gray-500 mt-8 text-sm">
Â  Â  Â  Â  Â  Â  Copyright 2025-2026 LRGarra
Â  Â  Â  Â  </footer>
Â  Â  </div>

Â  Â  <script>
Â  Â  Â  Â  // DOM element references
Â  Â  Â  Â  const dishNameInput = document.getElementById('dishNameInput');
Â  Â  Â  Â  const servingsInput = document.getElementById('servingsInput');
Â  Â  Â  Â  const button = document.getElementById('getRecipeBtn');
Â  Â  Â  Â  const loadingIndicator = document.getElementById('loadingIndicator');
Â  Â  Â  Â  const resultContainer = document.getElementById('resultContainer');
Â  Â  Â  Â  const recipeNameEl = document.getElementById('recipeName');
Â  Â  Â  Â  const servingsEl = document.getElementById('servings');
Â  Â  Â  Â  const ingredientsListEl = document.getElementById('ingredientsList');
Â  Â  Â  Â  const processListEl = document.getElementById('processList');
Â  Â  Â  Â  const errorContainer = document.getElementById('errorContainer');
Â  Â  Â  Â  const errorMessageEl = document.getElementById('errorMessage');
Â  Â  Â  Â  const infoContainer = document.getElementById('infoContainer');
Â  Â  Â  Â  const infoMessageEl = document.getElementById('infoMessage');

Â  Â  Â  Â  // Function to show an error message
Â  Â  Â  Â  function showError(message) {
Â  Â  Â  Â  Â  Â  errorContainer.classList.remove('hidden');
Â  Â  Â  Â  Â  Â  errorContainer.classList.add('shake');
Â  Â  Â  Â  Â  Â  errorMessageEl.textContent = message;
Â  Â  Â  Â  Â  Â  setTimeout(() => {
Â  Â  Â  Â  Â  Â  Â  Â  errorContainer.classList.remove('shake');
Â  Â  Â  Â  Â  Â  }, 500);
Â  Â  Â  Â  }

Â  Â  Â  Â  // Function to show an info message
Â  Â  Â  Â  function showInfo(message) {
Â  Â  Â  Â  Â  Â  infoContainer.classList.remove('hidden');
Â  Â  Â  Â  Â  Â  infoMessageEl.textContent = message;
Â  Â  Â  Â  }

Â  Â  Â  Â  // Function to hide all result and info messages
Â  Â  Â  Â  function hideAllMessages() {
Â  Â  Â  Â  Â  Â  errorContainer.classList.add('hidden');
Â  Â  Â  Â  Â  Â  resultContainer.classList.add('hidden');
Â  Â  Â  Â  Â  Â  infoContainer.classList.add('hidden');
Â  Â  Â  Â  }

Â  Â  Â  Â  // Updated function to call the Vercel Serverless Function
Â  Â  Â  Â  async function getScaledRecipe() {
Â  Â  Â  Â  Â  Â  const dishName = dishNameInput.value.trim();
Â  Â  Â  Â  Â  Â  const servings = servingsInput.value.trim();

Â  Â  Â  Â  Â  Â  if (!dishName || !servings || isNaN(parseInt(servings))) {
Â  Â  Â  Â  Â  Â  Â  Â  showError("Please enter a dish name and a valid number of servings.");
Â  Â  Â  Â  Â  Â  Â  Â  return;
Â  Â  Â  Â  Â  Â  }

Â  Â  Â  Â  Â  Â  hideAllMessages();
Â  Â  Â  Â  Â  Â  loadingIndicator.classList.remove('hidden');
Â  Â  Â  Â  Â  Â  button.disabled = true;

Â  Â  Â  Â  Â  Â  try {
Â  Â  Â  Â  Â  Â  Â  Â  const response = await fetch('/api/recipe', {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  method: 'POST',
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  headers: {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  'Content-Type': 'application/json',
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  },
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  body: JSON.stringify({ dishName, servings }),
Â  Â  Â  Â  Â  Â  Â  Â  });

Â  Â  Â  Â  Â  Â  Â  Â  if (!response.ok) {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  const errorData = await response.json();
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  throw new Error(errorData.error || "Failed to fetch recipe.");
Â  Â  Â  Â  Â  Â  Â  Â  }

Â  Â  Â  Â  Â  Â  Â  Â  const data = await response.json();

Â  Â  Â  Â  Â  Â  Â  Â  if (data.isRecipeFound) {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  if (data.recipeName && data.servings !== undefined && data.ingredients && data.process) {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  recipeNameEl.textContent = data.recipeName;
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  servingsEl.textContent = `Servings: ${data.servings}`;
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  ingredientsListEl.innerHTML = '';
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  data.ingredients.forEach(ingredient => {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  const li = document.createElement('li');
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  li.textContent = ingredient;
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  ingredientsListEl.appendChild(li);
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  });

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  processListEl.innerHTML = '';
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  data.process.forEach(step => {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  const li = document.createElement('li');
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  li.textContent = step;
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  processListEl.appendChild(li);
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  });
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  resultContainer.classList.remove('hidden');
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  } else {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  showError("Invalid recipe data returned.");
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  Â  Â  } else {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  showInfo(data.message || "No recipe found for that item.");
Â  Â  Â  Â  Â  Â  Â  Â  }

Â  Â  Â  Â  Â  Â  } catch (error) {
Â  Â  Â  Â  Â  Â  Â  Â  console.error("Fetch error:", error);
Â  Â  Â  Â  Â  Â  Â  Â  showError(error.message || "Failed to fetch recipe. Please try again later.");
Â  Â  Â  Â  Â  Â  } finally {
Â  Â  Â  Â  Â  Â  Â  Â  loadingIndicator.classList.add('hidden');
Â  Â  Â  Â  Â  Â  Â  Â  button.disabled = false;
Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  }

Â  Â  Â  Â  // Event listeners
Â  Â  Â  Â  button.addEventListener('click', getScaledRecipe);
Â  Â  Â  Â  dishNameInput.addEventListener('keypress', (e) => {
Â  Â  Â  Â  Â  Â  if (e.key === 'Enter') {
Â  Â  Â  Â  Â  Â  Â  Â  getScaledRecipe();
Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  });
Â  Â  Â  Â  servingsInput.addEventListener('keypress', (e) => {
Â  Â  Â  Â  Â  Â  if (e.key === 'Enter') {
Â  Â  Â  Â  Â  Â  Â  Â  getScaledRecipe();
Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  });
Â  Â  </script>
</body>
</html>
